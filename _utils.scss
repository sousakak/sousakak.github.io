/************************************************************************************
░██████╗████████╗██╗░░░██╗██╗░░░░░███████╗░██████╗░░░░██████╗░█████╗░░██████╗░██████╗
██╔════╝╚══██╔══╝╚██╗░██╔╝██║░░░░░██╔════╝██╔════╝░░░██╔════╝██╔══██╗██╔════╝██╔════╝
╚█████╗░░░░██║░░░░╚████╔╝░██║░░░░░█████╗░░╚█████╗░░░░╚█████╗░██║░░╚═╝╚█████╗░╚█████╗░
░╚═══██╗░░░██║░░░░░╚██╔╝░░██║░░░░░██╔══╝░░░╚═══██╗░░░░╚═══██╗██║░░██╗░╚═══██╗░╚═══██╗
██████╔╝░░░██║░░░░░░██║░░░███████╗███████╗██████╔╝██╗██████╔╝╚█████╔╝██████╔╝██████╔╝
╚═════╝░░░░╚═╝░░░░░░╚═╝░░░╚══════╝╚══════╝╚═════╝░╚═╝╚═════╝░░╚════╝░╚═════╝░╚═════╝░
************************************************************************************/

@charset "UTF-8";

// meta functions
@function strip-unit($number) {
    @if type-of($number) == 'number' and not unitless($number) {
        @return $number / ($number * 0 + 1);
    }
    @return $number;
}

@function rem($px, $base: 16) {
    @return calc($px / $base * 1rem);
}

// fonts
@import url('https://fonts.googleapis.com/css?family=M+PLUS+Rounded+1c');
@import url('https://fonts.googleapis.com/css?family=Sawarabi+Gothic');
@import url('https://fonts.googleapis.com/css?family=Sacramento');
@import url('https://fonts.googleapis.com/css?family=Klee+One');
@font-face {
	font-family: 'Komorebi Gothic';
    font-style: normal;
	src: url(/fonts/komorebi-gothic.ttf);
}

$title-font: 'M PLUS Rounded 1c', sans-serif;
$content-font: 'Komorebi Gothic', 'Sawarabi Gothic', sans-serif;
$alphabet-font: 'Klee+One';
$cursive-font: 'Sacramento', cursive;

$breakpoints : (
    list: (
        300px, 347px, 395px, 442px, 490px
    )
);

$brakpoint-media: ( // The value of $breakpoints cannot be used if this is combined from the jump
    media: (
        xs:"only screen and (max-width: #{nth(map-get($breakpoints, list), 1)})",
        xs-s:"only screen and (min-width: #{nth(map-get($breakpoints, list), 1) + 1}) and (max-width: #{nth(map-get($breakpoints, list),2)})",
        s:"only screen and (max-width: #{nth(map-get($breakpoints, list), 2)})",
        s-m:"only screen and (min-width: #{nth(map-get($breakpoints, list), 2) + 1}) and (max-width: #{nth(map-get($breakpoints, list),3)})",
        m:"only screen and (max-width: #{nth(map-get($breakpoints, list), 3)})",
        mmin:"only screen and (min-width: #{nth(map-get($breakpoints, list), 3)})",
        m-l:"only screen and (min-width: #{nth(map-get($breakpoints, list), 3) + 1}) and (max-width: #{nth(map-get($breakpoints, list),4)})",
        l:"only screen and (max-width: #{nth(map-get($breakpoints, list), 4)})",
        lmin:"only screen and (min-width: #{nth(map-get($breakpoints, list), 4)})",
        l-ul:"only screen and (min-width: #{nth(map-get($breakpoints, list), 4) + 1}) and (max-width: #{nth(map-get($breakpoints, list),5)})",
        ul:"only screen and (max-width: #{nth(map-get($breakpoints, list), 5)})",
        d:"only screen and (min-width: #{nth(map-get($breakpoints, list), 5) + 1})",
    )
);

$breakpoints: (
    map-merge($breakpoints, $brakpoint-media)
);

@mixin media($breakpoint) {
    @media #{map-get(map-get($breakpoints, media), $breakpoint)} {
        @content;
    }
}

@function sizecalc($sizefrom, $sizeto, $vpfrom, $vpto) {
    $size_diff : $sizeto - $sizefrom;
    $vp-width-diff : strip-unit($vpto) - strip-unit($vpfrom);

    $vp-width-min : calc(strip-unit($vpfrom) / 100 * 0.1rem);
    $size-per-vp : calc(100 * $size_diff / $vp-width-diff);
    $size-min : $sizefrom / 10 + 0rem;

    @return calc(#{$size-min} + ((1vw - #{$vp-width-min}) * (#{$size-per-vp})));
}

@mixin font-size($ul: 16, $min: 10, $l: true, $m: true, $s: true, $xs: true) {
    @if $l {
        $l  : calc(($ul - $min) * (4 / 5) + $min);
    }
    @if $m {
        $m  : calc(($ul - $min) * (3 / 5) + $min);
    }
    @if $s {
        $s  : calc(($ul - $min) * (2 / 5) + $min);
    }
    @if $xs {
        $xs : calc(($ul - $min) * (1 / 5) + $min);
    }
    & {
        @include media(d) {
            font-size: rem($ul);
        }
        @include media(l-ul) {
            font-size: sizecalc($l, $ul, nth(map-get($breakpoints, list), 4) + 1, nth(map-get($breakpoints, list), 5));
        }
        @include media(m-l) {
            font-size: sizecalc($m, $l, nth(map-get($breakpoints, list), 3) + 1, nth(map-get($breakpoints, list), 4));
        }
        @include media(s-m) {
            font-size: sizecalc($s, $m, nth(map-get($breakpoints, list), 2) + 1, nth(map-get($breakpoints, list), 3));
        }
        @include media(xs-s) {
            font-size: sizecalc($xs, $s, nth(map-get($breakpoints, list), 1) + 1, nth(map-get($breakpoints, list), 2));
        }
        @include media(xs) {
            font-size: sizecalc(0, $xs, 0, nth(map-get($breakpoints, list), 1));
        }
    }
}

// colors
$colors: (
    normal: (
        main-color: #00CED1, // DarkTurquoise
        base-color: #E4E4E4,
        accent-color: #8FBC8F // DarkSeaGreen
    ),
    index: (
        main-color: #90F59A,
        base-color: #E4E4E4,
        accent-color: #90D1F5
    )
);

@function color($type, $page: normal, $default: map-get(map-get($colors, normal), base-color)) {
    @if map-has-key($colors, $page) {
        @if map-has-key(map-get($colors, $page), $type + "-color") {
            @return map-get(map-get($colors, $page), $type + "-color");
        } @else {
            @return $default;
        }
    } @else {
        @warn "specified unexpected page: " + $page;
        @return $default;
    }
}

// images
$background-image: url(background-image.jpg);

// numerics
$body-length: 100vmin;

// components
%body {
    position: relative;
    padding: 0;
    margin: auto;
}

%header {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
}

%footer {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
}

@mixin blur($image: $background-image) {
    background-image: $image;
    background-repeat: no-repeat;
    background-size: contain;
    @content;
}

%blur-before {
    top: -3px;
    bottom: -3px;
    left: -3px;
    right: -3px;
    background: inherit;
    filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}

// events
@mixin hover($ie: false) {
    &:focus {
        @content;
    }
    
    @media (hover: hover) and (pointer: fine) {
        &:hover {
            @content;
        }
    }

    @if $ie {
        @at-root .ua-ie &:hover {
            @content;
        }
    }
}
